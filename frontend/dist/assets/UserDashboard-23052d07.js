import{_ as z,u as I,r as x,o as N,a,b as _,c as f,w as t,d as V,e as n,f as u,g as c,p as g,h as q,i as E,F,t as i}from"./index-a1ba2a77.js";import{U as S}from"./UserLayout-c3bc48f7.js";const W={name:"UserDashboard",components:{UserLayout:S},setup(){const y=I(),o=x([]),m=x(!1),s=e=>new Date(e).toLocaleDateString("zh-TW"),v=e=>{switch(e){case"n8n_host_chat":return"primary";case"n8n_embedded_chat":return"secondary";case"n8n_webhook":return"success";default:return"grey"}},b=e=>{switch(e){case"n8n_host_chat":return"Hosted 聊天";case"n8n_embedded_chat":return"Embedded 聊天";case"n8n_webhook":return"Webhook 聊天";default:return"未知類型"}},d=e=>{switch(e){case"n8n_host_chat":return"mdi-open-in-new";case"n8n_embedded_chat":return"mdi-chat";case"n8n_webhook":return"mdi-chat";default:return"mdi-help"}},l=e=>{switch(e){case"n8n_host_chat":return"開啟聊天";case"n8n_embedded_chat":return"開始對話";case"n8n_webhook":return"開始對話";default:return"開啟"}},p=e=>{switch(e.link_type){case"n8n_host_chat":window.open(e.url,"_blank");break;case"n8n_embedded_chat":y.push({name:"UserChat",query:{linkId:e.id,type:"embedded"}});break;case"n8n_webhook":y.push({name:"UserChat",query:{linkId:e.id,type:"webhook"}});break;default:console.error("未知的連結類型:",e.link_type)}},h=async()=>{m.value=!0;try{const e=await V.get("/api/chat-links");e.data.success&&(o.value=e.data.items||[])}catch(e){console.error("獲取聊天連結失敗:",e)}finally{m.value=!1}};return N(()=>{h()}),{chatLinks:o,loading:m,formatDate:s,getLinkTypeColor:v,getLinkTypeText:b,getLinkTypeIcon:d,getLinkTypeButtonText:l,openChatLink:p}}},H={class:"mb-3 text-caption text-grey"};function M(y,o,m,s,v,b){const d=a("v-col"),l=a("v-row"),p=a("v-icon"),h=a("v-card-text"),e=a("v-card"),k=a("v-card-title"),w=a("v-card-subtitle"),L=a("v-card-item"),T=a("v-chip"),C=a("v-spacer"),U=a("v-btn"),D=a("v-card-actions"),B=a("UserLayout");return _(),f(B,null,{default:t(()=>[n(l,null,{default:t(()=>[n(d,{cols:"12"},{default:t(()=>o[0]||(o[0]=[u("h1",{class:"text-h4 mb-6"},"我的聊天機器人",-1)])),_:1})]),_:1}),s.chatLinks.length===0?(_(),f(l,{key:0},{default:t(()=>[n(d,{cols:"12"},{default:t(()=>[n(e,{class:"text-center py-10"},{default:t(()=>[n(h,null,{default:t(()=>[n(p,{size:"64",color:"grey-lighten-1"},{default:t(()=>o[1]||(o[1]=[c("mdi-robot-off")])),_:1}),o[2]||(o[2]=u("h3",{class:"text-h5 mt-4"},"尚無可用的聊天機器人",-1)),o[3]||(o[3]=u("p",{class:"text-body-1 mt-2 text-grey"},"管理員尚未為您配置任何可用的聊天機器人，請稍後再試或聯絡管理員。",-1))]),_:1})]),_:1})]),_:1})]),_:1})):g("",!0),n(l,null,{default:t(()=>[(_(!0),q(F,null,E(s.chatLinks,r=>(_(),f(d,{key:r.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[n(e,{class:"mx-auto h-100 d-flex flex-column",hover:""},{default:t(()=>[n(L,null,{default:t(()=>[n(k,null,{default:t(()=>[c(i(r.name),1)]),_:2},1024),r.description?(_(),f(w,{key:0},{default:t(()=>[c(i(r.description),1)]),_:2},1024)):g("",!0)]),_:2},1024),n(h,{class:"flex-grow-1"},{default:t(()=>[u("div",null,[n(T,{size:"small",color:s.getLinkTypeColor(r.link_type),class:"mb-4"},{default:t(()=>[c(i(s.getLinkTypeText(r.link_type)),1)]),_:2},1032,["color"])]),u("p",H,[n(p,{size:"small",class:"mr-1"},{default:t(()=>o[4]||(o[4]=[c("mdi-calendar")])),_:1}),c(" 建立日期: "+i(s.formatDate(r.created_at)),1)])]),_:2},1024),n(D,{class:"mt-auto"},{default:t(()=>[n(C),n(U,{color:"primary",onClick:R=>s.openChatLink(r),"prepend-icon":s.getLinkTypeIcon(r.link_type)},{default:t(()=>[c(i(s.getLinkTypeButtonText(r.link_type)),1)]),_:2},1032,["onClick","prepend-icon"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}const G=z(W,[["render",M]]);export{G as default};
